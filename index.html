
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>REDLININ' Garage v1.2.1</title>
  <link href="https://fonts.cdnfonts.com/css/draco" rel="stylesheet">
  <link rel="stylesheet" href="style.css">
  <style>
    body {
      margin: 0;
      overflow: hidden;
      background: black;
    }
    #press-start {
      position: absolute;
      top: 45%;
      left: 50%;
      transform: translate(-50%, -50%);
      font-size: 36px;
      font-family: 'Draco', sans-serif;
      color: cyan;
      text-shadow: 0 0 10px cyan, 0 0 20px cyan;
      animation: glow 1.5s ease-in-out infinite alternate;
      z-index: 999;
      pointer-events: none;
    }

    @keyframes glow {
      from { opacity: 0.4; }
      to { opacity: 1; }
    }
  </style>
</head>
<body>

  <!-- Dust overlay video -->
  <div id="video-overlay-container" style="position: absolute; width: 100%; height: 100%; overflow: hidden; z-index: 1; mix-blend-mode: screen;">
    <video id="overlay-video" autoplay loop muted playsinline style="width: 100%; height: 100%; object-fit: cover; opacity: 0.5;">
      <source src="red-dust-slow-v1.mp4" type="video/mp4" />
    </video>
  </div>

  <!-- PRESS START overlay -->
  <div id="press-start">[ PRESS START ]</div>

  <!-- Garage elements -->
  <img id="hoverCar" class="hover-car" src="hover_ship_cutout.png" style="position: absolute; bottom: 10%; left: 50%; transform: translateX(-50%); width: 40%;" />

  <div id="menu" style="position: absolute; top: 10%; right: 5%; z-index: 3; font-family: 'Draco', sans-serif; color: white;">
    <div>ADVENTURE</div>
    <div>EXHIBITION</div>
    <div style="color:gray;">CUSTOMIZE</div>
    <div>OPTIONS</div>
    <div>PROFILE</div>
    <div>SECRETS SHOP</div>
  </div>

  <div id="jukebox-skin" style="position: absolute; bottom: 20px; left: 20px; z-index: 2;">
    <img src="redlinin mp3 player skin v1.png" alt="MP3 Player Skin" style="width: 240px;">
    <canvas id="visualizer" width="240" height="50"></canvas>
  </div>

  <script>
    const tracks = [
      "redlinin garage mush v1 (1).mp3", "redlinin garage mush v1 (2).mp3",
      "redlinin garage mush v1 (3).mp3", "redlinin garage mush v1 (4).mp3",
      "redlinin garage mush v1 (5).mp3", "redlinin garage mush v1 (6).mp3",
      "redlinin garage mush v1 (7).mp3", "redlinin garage mush v1 (8).mp3",
      "redlinin garage mush v1 (9).mp3", "redlinin garage mush v1 (10).mp3"
    ];

    // Shuffle playlist
    for (let i = tracks.length - 1; i > 0; i--) {
      const j = Math.floor(Math.random() * (i + 1));
      [tracks[i], tracks[j]] = [tracks[j], tracks[i]];
    }

    let currentTrack = 0;
    const audio = new Audio(tracks[currentTrack]);
    audio.loop = false;
    audio.volume = 1;

    // Visualizer setup
    const canvas = document.getElementById("visualizer");
    const ctx = canvas.getContext("2d");
    const audioCtx = new (window.AudioContext || window.webkitAudioContext)();
    const analyser = audioCtx.createAnalyser();
    const source = audioCtx.createMediaElementSource(audio);
    source.connect(analyser);
    analyser.connect(audioCtx.destination);
    analyser.fftSize = 64;
    const bufferLength = analyser.frequencyBinCount;
    const dataArray = new Uint8Array(bufferLength);

    function draw() {
      requestAnimationFrame(draw);
      analyser.getByteFrequencyData(dataArray);
      ctx.clearRect(0, 0, canvas.width, canvas.height);
      const barWidth = (canvas.width / bufferLength) * 1.5;
      for (let i = 0; i < bufferLength; i++) {
        const barHeight = dataArray[i] / 2;
        ctx.fillStyle = 'lime';
        ctx.fillRect(i * barWidth, canvas.height - barHeight, barWidth - 2, barHeight);
      }
    }

    audio.addEventListener('ended', () => {
      currentTrack = (currentTrack + 1) % tracks.length;
      audio.src = tracks[currentTrack];
      audio.play();
    });

    // PRESS START logic
    const pressStart = document.getElementById("press-start");
    function activateStart() {
      pressStart.style.transition = "opacity 1s ease-out";
      pressStart.style.opacity = 0;
      setTimeout(() => { pressStart.style.display = "none"; }, 1000);
      audioCtx.resume();
      audio.play();
      draw();
    }

    document.addEventListener("keydown", activateStart, { once: true });
  </script>
</body>
</html>
